# 隐藏弹幕原理 

看LOL比赛时发现虎牙也可以隐藏一些弹幕以显示出背后的英雄，遂去观看学习了下

[视频](https://raw.githubusercontent.com/lxhyl/lxhyl.github.io/master/files/video/a5ede99ac811847c09916db853e19bcc.mp4 ':include')

去b站看了下，发现和虎牙的原理一样，发现弹幕层其实是有个遮挡的背景图片的,如下所示    
![长这样](data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKIHdpZHRoPSI2MjcuMDI1cHgiIGhlaWdodD0iMzU1cHgiIHZpZXdCb3g9IjAgMCAzMjAuMDAwMDAwIDE4MC4wMDAwMDAiCiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMTgwLjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgOTA1IGwwIC04OTUgNjMwIDAgNjMwIDAgMCA3OCBjMCA2MyA3IDk1IDM1IDE3NyAyMCA1NSA0MCAxMzIgNDUgMTcxIDUgNDAKMjMgMTIxIDQwIDE4MCA0MCAxNDQgMzkgMTU2IC05IDE5NSAtNDEgMzMgLTUyIDUzIC03MCAxMzIgLTkgMzYgLTkgNTkgMCA5MCA3CjIzIDE1IDgyIDE4IDEzMiA2IDg3IDcgOTAgMzQgOTkgMjAgNyAzNyA2IDYwIC0zIDE4IC03IDU1IC0xNyA4MiAtMjAgNjIgLTkKOTIgLTI0IDEwMSAtNTMgMzIgLTEwNSA0NiAtMTI4IDkyIC0xNTUgMjYgLTE0IDcwIC00MSA5NyAtNjAgNjUgLTQzIDE4NyAtOTMKMjQ1IC05OSA3NyAtOSA4NiAtMTMgOTggLTM5IDE0IC0zMCAxNiAtMTA0IDMgLTEyNCAtMTEgLTE4IC0xMDQgLTMyIC0xNTUgLTI0Ci0yMiAzIC01NCAxNCAtNzEgMjQgLTQwIDIzIC05MSAzMyAtMTAwIDE5IC0zIC01IC0xMSAtNyAtMTcgLTQgLTEzIDggLTEgLTUxCjE5IC05MCAxMSAtMjEgMTUgLTY3IDE1IC0xODAgMSAtMTAzIDUgLTE2NCAxNSAtMTkxIDE3IC00NyAxOSAtMTY2IDMgLTE5NCAtNQotMTEgLTEwIC0yOSAtMTAgLTQwIGwwIC0yMSA2ODUgMCA2ODUgMCAwIDg5NSAwIDg5NSAtMTYwMCAwIC0xNjAwIDAgMCAtODk1eiIvPgo8L2c+Cjwvc3ZnPgo=)


使用了[mask-image](https://www.zhangxinxu.com/wordpress/2017/11/css-css3-mask-masks/)这个css属性,白色的部分用来遮挡弹幕，显现背后的视频

服务器应该是识别关键画面，生成base64的图片，然后web中不断切换这个蒙层图片，达到显现背后视频的目的

下面是个小例子  
[demo.html](/前端/文章/2021/files/danmu.html)


